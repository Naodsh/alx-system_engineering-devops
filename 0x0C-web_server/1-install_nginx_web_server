#!/usr/bin/env bash
# Install Nginx

apt-get update -y
apt-get install nginx -y

# Check if Nginx is installed
if ! command -v nginx &> /dev/null; then
    echo "Nginx installation failed"
    exit 1
fi

# Create default index.html with "Hello World!"
echo "Hello World!" > /var/www/html/index.html

# Restart Nginx
killall -s HUP nginx

# Verify Nginx is running and serving the correct content
response=$(curl -s localhost)
if [ "$response" != "Hello World!" ]; then
    echo "Nginx is not serving the correct content"
    exit 1
fi

echo "Nginx installed and configured successfully"
